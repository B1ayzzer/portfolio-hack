{"ast":null,"code":"var _jsxFileName = \"/Users/bakai/Desktop/\\u0410\\u0440\\u0445\\u0438\\u0432 2/src/contexts/ProductContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useReducer, useState } from \"react\";\nimport axios from \"axios\";\nimport { calcSubPrice, calcTotalPrice, getCountProductsInCart } from \"../helpers/cartFunctions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const productsContext = /*#__PURE__*/createContext();\nconst INIT_STATE = {\n  products: [],\n  currentProduct: {},\n  cartLength: getCountProductsInCart(),\n  cart: {},\n  topicToEdit: null\n};\n\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INIT_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"GET_PRODUCTS\":\n      return { ...state,\n        products: action.payload\n      };\n\n    case \"GET_CURRENT_PRODUCT\":\n      return { ...state,\n        currentProduct: action.payload\n      };\n\n    case \"CHANGE_CART_COUNT\":\n      return { ...state,\n        cartLength: action.payload\n      };\n\n    case \"GET_CART\":\n      return { ...state,\n        cart: action.payload\n      };\n\n    case \"GET_TOPICS\":\n      return { ...state,\n        topics: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst ProductsContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n  const [data, setData] = useState({});\n  const [dataId, setDataId] = useState();\n\n  const getProducts = async function () {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    const {\n      data\n    } = await axios(`http://localhost:8001/products?${params}`);\n    dispatch({\n      type: \"GET_PRODUCTS\",\n      payload: data\n    });\n  };\n\n  const getCurProduct = async id => {\n    const {\n      data\n    } = await axios(`http://localhost:8001/products/${id}`);\n    dispatch({\n      type: \"GET_CURRENT_PRODUCT\",\n      payload: data\n    });\n  };\n\n  async function addMainTopic(topic) {\n    await axios.post(\"http://localhost:8001/products\", topic);\n    getTopics();\n  }\n\n  async function getTopics(params) {\n    let {\n      data\n    } = await axios(`http://localhost:8001/products?${params}`);\n    dispatch({\n      type: \"GET_TOPICS\",\n      payload: data\n    });\n  }\n\n  async function editTopicDetails(newTopic) {\n    console.log(dataId);\n    await axios.patch(`http://localhost:8001/products/${dataId}`, newTopic);\n    getTopics();\n  }\n\n  function getData(newData, id) {\n    setData(newData);\n    setDataId(id);\n  }\n\n  async function handleDelete(id) {\n    await axios.delete(`http://localhost:8001/products/${id}`);\n    getProducts();\n  } // Корзина\n\n\n  const addProductToCart = product => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    let newProduct = {\n      item: product,\n      count: 1,\n      subPrice: 0\n    };\n    let filteredCart = cart.products.filter(elem => elem.item.id === product.id);\n\n    if (filteredCart.length > 0) {\n      cart.products = cart.products.filter(elem => elem.item.id !== product.id);\n    } else {\n      cart.products.push(newProduct);\n    }\n\n    newProduct.subPrice = calcSubPrice(newProduct);\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch({\n      type: \"CHANGE_CART_COUNT\",\n      payload: cart.products.length\n    });\n  };\n\n  const getCart = () => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    dispatch({\n      type: \"GET_CART\",\n      payload: cart\n    });\n  };\n\n  function changeProductCount(count, id) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    cart.products = cart.products.map(elem => {\n      if (elem.item.id === id) {\n        elem.count = count;\n        elem.subPrice = calcSubPrice(elem);\n      }\n\n      return elem;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function changeProductCount(count, id) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    cart.products = cart.products.map(elem => {\n      if (elem.item.id === id) {\n        elem.count = count;\n        elem.subPrice = calcSubPrice(elem);\n      }\n\n      return elem;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  return /*#__PURE__*/_jsxDEV(productsContext.Provider, {\n    value: {\n      products: state.products,\n      // products: state.topics,\n      currentProduct: state.currentProduct,\n      cartLength: state.cartLength,\n      cart: state.cart,\n      getProducts,\n      getCurProduct,\n      addProductToCart,\n      getCart,\n      changeProductCount,\n      getTopics,\n      addMainTopic,\n      editTopicDetails,\n      getData,\n      data,\n      handleDelete\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductsContextProvider, \"dy159mV0zZ4L108FjRuHIWWG1JM=\");\n\n_c = ProductsContextProvider;\nexport default ProductsContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsContextProvider\");","map":{"version":3,"sources":["/Users/bakai/Desktop/Архив 2/src/contexts/ProductContext.js"],"names":["React","createContext","useReducer","useState","axios","calcSubPrice","calcTotalPrice","getCountProductsInCart","productsContext","INIT_STATE","products","currentProduct","cartLength","cart","topicToEdit","reducer","state","action","type","payload","topics","ProductsContextProvider","children","dispatch","data","setData","dataId","setDataId","getProducts","params","getCurProduct","id","addMainTopic","topic","post","getTopics","editTopicDetails","newTopic","console","log","patch","getData","newData","handleDelete","delete","addProductToCart","product","JSON","parse","localStorage","getItem","totalPrice","newProduct","item","count","subPrice","filteredCart","filter","elem","length","push","setItem","stringify","getCart","changeProductCount","map"],"mappings":"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","sourcesContent":["import React, { createContext, useReducer, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  calcSubPrice,\r\n  calcTotalPrice,\r\n  getCountProductsInCart,\r\n} from \"../helpers/cartFunctions\";\r\n\r\nexport const productsContext = createContext();\r\n\r\nconst INIT_STATE = {\r\n  products: [],\r\n  currentProduct: {},\r\n  cartLength: getCountProductsInCart(),\r\n  cart: {},\r\n  topicToEdit: null,\r\n};\r\n\r\nconst reducer = (state = INIT_STATE, action) => {\r\n  switch (action.type) {\r\n    case \"GET_PRODUCTS\":\r\n      return { ...state, products: action.payload };\r\n    case \"GET_CURRENT_PRODUCT\":\r\n      return { ...state, currentProduct: action.payload };\r\n    case \"CHANGE_CART_COUNT\":\r\n      return { ...state, cartLength: action.payload };\r\n    case \"GET_CART\":\r\n      return { ...state, cart: action.payload };\r\n    case \"GET_TOPICS\":\r\n      return { ...state, topics: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst ProductsContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\r\n  const [data, setData] = useState({});\r\n  const [dataId, setDataId] = useState();\r\n\r\n  const getProducts = async (params = \"\") => {\r\n    const { data } = await axios(`http://localhost:8001/products?${params}`);\r\n    dispatch({\r\n      type: \"GET_PRODUCTS\",\r\n      payload: data,\r\n    });\r\n  };\r\n\r\n  const getCurProduct = async (id) => {\r\n    const { data } = await axios(`http://localhost:8001/products/${id}`);\r\n    dispatch({\r\n      type: \"GET_CURRENT_PRODUCT\",\r\n      payload: data,\r\n    });\r\n  };\r\n\r\n  async function addMainTopic(topic) {\r\n    await axios.post(\"http://localhost:8001/products\", topic);\r\n    getTopics();\r\n  }\r\n\r\n  async function getTopics(params) {\r\n    let { data } = await axios(`http://localhost:8001/products?${params}`);\r\n    dispatch({\r\n      type: \"GET_TOPICS\",\r\n      payload: data,\r\n    });\r\n  }\r\n\r\n  async function editTopicDetails(newTopic) {\r\n    console.log(dataId);\r\n    await axios.patch(`http://localhost:8001/products/${dataId}`, newTopic);\r\n    getTopics();\r\n  }\r\n\r\n  function getData(newData, id) {\r\n    setData(newData);\r\n    setDataId(id);\r\n  }\r\n\r\n  async function handleDelete(id) {\r\n    await axios.delete(`http://localhost:8001/products/${id}`);\r\n    getProducts();\r\n  }\r\n\r\n  // Корзина\r\n\r\n  const addProductToCart = (product) => {\r\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    if (!cart) {\r\n      cart = {\r\n        products: [],\r\n        totalPrice: 0,\r\n      };\r\n    }\r\n    let newProduct = {\r\n      item: product,\r\n      count: 1,\r\n      subPrice: 0,\r\n    };\r\n    let filteredCart = cart.products.filter(\r\n      (elem) => elem.item.id === product.id\r\n    );\r\n    if (filteredCart.length > 0) {\r\n      cart.products = cart.products.filter(\r\n        (elem) => elem.item.id !== product.id\r\n      );\r\n    } else {\r\n      cart.products.push(newProduct);\r\n    }\r\n    newProduct.subPrice = calcSubPrice(newProduct);\r\n    cart.totalPrice = calcTotalPrice(cart.products);\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    dispatch({\r\n      type: \"CHANGE_CART_COUNT\",\r\n      payload: cart.products.length,\r\n    });\r\n  };\r\n\r\n  const getCart = () => {\r\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    if (!cart) {\r\n      cart = {\r\n        products: [],\r\n        totalPrice: 0,\r\n      };\r\n    }\r\n    dispatch({\r\n      type: \"GET_CART\",\r\n      payload: cart,\r\n    });\r\n  };\r\n\r\n  function changeProductCount(count, id) {\r\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    cart.products = cart.products.map((elem) => {\r\n      if (elem.item.id === id) {\r\n        elem.count = count;\r\n        elem.subPrice = calcSubPrice(elem);\r\n      }\r\n      return elem;\r\n    });\r\n    cart.totalPrice = calcTotalPrice(cart.products);\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    getCart();\r\n  }\r\n  function changeProductCount(count, id) {\r\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    cart.products = cart.products.map((elem) => {\r\n      if (elem.item.id === id) {\r\n        elem.count = count;\r\n        elem.subPrice = calcSubPrice(elem);\r\n      }\r\n      return elem;\r\n    });\r\n\r\n    cart.totalPrice = calcTotalPrice(cart.products);\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    getCart();\r\n  }\r\n\r\n  return (\r\n    <productsContext.Provider\r\n      value={{\r\n        products: state.products,\r\n        // products: state.topics,\r\n        currentProduct: state.currentProduct,\r\n        cartLength: state.cartLength,\r\n        cart: state.cart,\r\n        getProducts,\r\n        getCurProduct,\r\n        addProductToCart,\r\n        getCart,\r\n        changeProductCount,\r\n        getTopics,\r\n        addMainTopic,\r\n        editTopicDetails,\r\n        getData,\r\n        data,\r\n        handleDelete,\r\n      }}\r\n    >\r\n      {children}\r\n    </productsContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ProductsContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}